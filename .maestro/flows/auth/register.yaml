# Registration Flow Test
# Tests the complete user registration workflow

appId: com.joel.authexpo
---
- launchApp
- clearState
- launchApp  # Re-launch after clearing state

# Wait for app to finish loading and navigate to sign-in screen
- extendedWaitUntil:
    visible: "welcome-back-title"
    timeout: 20000

# Navigate to registration
- assertVisible: "welcome-back-title"
- tapOn: "Sign Up"

# Verify registration screen
- extendedWaitUntil:
    visible: "create-account-title"
    timeout: 10000
- assertVisible: "create-account-title"
- assertVisible: "Email"
- assertVisible: 
    text: "Username"
    optional: true
- assertVisible: "Password"
- assertVisible: "Confirm Password"
- takeScreenshot: register-initial

# Test Case: Successful Registration
- tapOn:
    text: "Choose a username"
- inputText: "authBotUser"

- tapOn:
    text: "Enter your email"
- inputText: "auth-bot@example.com"

- tapOn:
    text: "Create a password"
- inputText: "AuthBotTest123!"

- tapOn:
    text: "Confirm your password"
- inputText: "AuthBotTest123!"

- takeScreenshot: register-filled
- tapOn: "Create Account"

# Wait for the home screen to appear
- extendedWaitUntil:
    visible:
      text: ".*Hello.*"
      regex: true
    timeout: 30000

# Wait for navigation to home screen
- assertVisible:
    text: ".*Hello.*"
    regex: true
- takeScreenshot: register-success
